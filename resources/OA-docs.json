{"openapi":"3.0.0","info":{"title":"Grainvision API","version":"1.0.0","description":"# **Documentation**\nThis is the documentation page for **Grainvision Web**. Created to provide a better understanding of how to use this app and build a better overall user experience. It contains all relevant paths and operations with important data, including their parameters, responses, and possible errors. \n\nThe API can be divided into three main groups of endpoints:\n\n\n### * **Facility Operations**\n\nIt consists of all the operations used to view, store, update and delete facilities, and all the pieces that compose them. It's the main characteristic of Grainvision Web and the one that is most deeply explained in this documentation page.\n\n### * **Authentication Operations**\n\nThese are the operations which primary purpose is to authenticate the user to give them access into the application. Without authentication the user cannot operate with the API.\n\n### * **Settings and Profile Operations**\n\nThis group is useful for configuration purposes, managing the user's profile and its information.\n","contact":{"name":"IEA","email":"a@j.com"},"x-logo":{"url":""}},"servers":[{"url":"http://grainvision.local/","description":"","x-last-modified":1639058782538}],"paths":{"/api/user":{"summary":"Get user.","description":"Get information about the user.","get":{"tags":["Settings and Profile Operations"],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"},"example":""}},"description":"Successful operation."},"401":{"description":"Not authenticated."}},"operationId":"getUser","summary":"Get user","description":"Get all user info."},"x-last-modified":1639059221932},"/api/settings/profile":{"summary":"Update profile.","description":"Update username and email of a user.","patch":{"requestBody":{"description":"Enter username and password.","content":{"application/json":{"schema":{"description":"","required":["name","email"],"type":"object","properties":{"name":{"minLength":1,"type":"string"},"email":{"minLength":1,"type":"string"}},"x-examples":{"example-1":{"name":"fede","email":"admin@grainvision.com.ar"}}}}},"required":true},"tags":["Settings and Profile Operations"],"responses":{"200":{"description":"Succesful operation."}},"operationId":"patchProfile","summary":"Change user info","description":"Update username and email."},"x-last-modified":1639059230919},"/api/administration/roles-permissions":{"summary":"Get roles and permissions.","description":"Get an array with all the roles and its permissions.","get":{"tags":["Administrative Operations"],"responses":{"200":{"content":{"application/json":{"schema":{"description":"","required":["roles","permissions"],"type":"object","properties":{"roles":{"minItems":1,"uniqueItems":true,"type":"array","items":{"required":["name"],"properties":{"name":{"minLength":1,"type":"string"},"permissions":{"type":"array"}}}},"permissions":{"minItems":1,"uniqueItems":true,"type":"array","items":{"required":["name"],"properties":{"name":{"minLength":1,"type":"string"}}}}},"externalDocs":{"description":"","url":""},"example":"","x-examples":{"example-1":{"roles":[{"name":"super-admin","permissions":[]},{"name":"administrator","permissions":[{"name":"dashboard"},{"name":"facilities"},{"name":"facilities.status"},{"name":"facilities.overview"},{"name":"facilities.view"},{"name":"facilities.container.status"},{"name":"facilities.container.truss.status"},{"name":"facilities.container.cable.chart"},{"name":"facilities.container.cable.truss.chart"},{"name":"facilities.container.cable.sensor.chart"},{"name":"facilities.container.truss.cable.sensor.chart"},{"name":"facilities.historics.store"},{"name":"administration"},{"name":"administration.users"},{"name":"administration.users.index"},{"name":"administration.users.create"},{"name":"administration.users.edit"},{"name":"administration.users.update"},{"name":"administration.users.delete"},{"name":"administration.facilities"},{"name":"administration.facilities.index"},{"name":"administration.facilities.create"},{"name":"administration.facilities.edit"},{"name":"administration.facilities.update"},{"name":"administration.facilities.delete"}]},{"name":"standard","permissions":[{"name":"facilities.view"},{"name":"facilities.container.status"},{"name":"facilities.container.truss.status"},{"name":"facilities.container.cable.chart"},{"name":"facilities.container.cable.truss.chart"},{"name":"facilities.container.cable.sensor.chart"},{"name":"facilities.container.truss.cable.sensor.chart"}]},{"name":"supervisor","permissions":[{"name":"facilities.status"},{"name":"facilities.overview"},{"name":"facilities.view"},{"name":"facilities.container.status"},{"name":"facilities.container.truss.status"},{"name":"facilities.container.cable.chart"},{"name":"facilities.container.cable.truss.chart"},{"name":"facilities.container.cable.sensor.chart"},{"name":"facilities.container.truss.cable.sensor.chart"},{"name":"facilities.historics.store"}]},{"name":"regional_manager","permissions":[{"name":"dashboard"},{"name":"facilities"},{"name":"facilities.status"},{"name":"facilities.overview"},{"name":"facilities.view"},{"name":"facilities.container.status"},{"name":"facilities.container.truss.status"},{"name":"facilities.container.cable.chart"},{"name":"facilities.container.cable.truss.chart"},{"name":"facilities.container.cable.sensor.chart"},{"name":"facilities.container.truss.cable.sensor.chart"},{"name":"facilities.historics.store"}]},{"name":"gvcloud","permissions":[{"name":"facilities.historics.store"}]}],"permissions":[{"name":"dashboard"},{"name":"facilities"},{"name":"facilities.status"},{"name":"facilities.overview"},{"name":"facilities.view"},{"name":"facilities.container.status"},{"name":"facilities.container.truss.status"},{"name":"facilities.container.cable.chart"},{"name":"facilities.container.cable.truss.chart"},{"name":"facilities.container.cable.sensor.chart"},{"name":"facilities.container.truss.cable.sensor.chart"},{"name":"facilities.historics.store"},{"name":"administration"},{"name":"administration.users"},{"name":"administration.users.index"},{"name":"administration.users.create"},{"name":"administration.users.edit"},{"name":"administration.users.update"},{"name":"administration.users.delete"},{"name":"administration.facilities"},{"name":"administration.facilities.index"},{"name":"administration.facilities.create"},{"name":"administration.facilities.edit"},{"name":"administration.facilities.update"},{"name":"administration.facilities.delete"}]}}},"example":""}},"description":"Successful operation"},"400":{"description":"Bad Request.","x-last-modified":1638880604751}},"operationId":"getRolesAndPermissions","summary":"Get roles and permissions","description":"Get a list of all roles and permissions"},"x-last-modified":1639059325643},"/api/administration/users":{"summary":"Get all users.","description":"Get an array with all the users and all their information.","get":{"tags":["Administrative Operations"],"responses":{"200":{"content":{"application/json":{"schema":{"description":"","minItems":1,"uniqueItems":true,"type":"array","items":{"required":["id","name","email","created_at","updated_at","photo_url","roles","permissions"],"type":"object","properties":{"id":{"type":"number"},"name":{"minLength":1,"type":"string"},"email":{"minLength":1,"type":"string"},"created_at":{"minLength":1,"type":"string"},"updated_at":{"minLength":1,"type":"string"},"photo_url":{"minLength":1,"type":"string"},"roles":{"minItems":1,"uniqueItems":true,"type":"array","items":{"required":["name"],"properties":{"name":{"minLength":1,"type":"string"},"permissions":{"type":"array"}}}},"permissions":{"minItems":1,"uniqueItems":true,"type":"array","items":{"required":["name"],"properties":{"name":{"minLength":1,"type":"string"}}}}}},"externalDocs":{"description":"","url":""},"example":"","x-examples":{"example-1":[{"id":1,"name":"fede","email":"admin@grainvision.com.ar","created_at":"2021-10-04 09:24:59","updated_at":"2021-11-16 10:55:24","photo_url":"https://www.gravatar.com/avatar/549dd0ad5839708b235682769d181cc4.jpg?s=200&d=mm","roles":[{"name":"super-admin","permissions":[]}],"permissions":[{"name":"dashboard"},{"name":"facilities"},{"name":"facilities.status"},{"name":"facilities.overview"},{"name":"facilities.view"},{"name":"facilities.container.status"},{"name":"facilities.container.truss.status"},{"name":"facilities.container.cable.chart"},{"name":"facilities.container.cable.truss.chart"},{"name":"facilities.container.cable.sensor.chart"},{"name":"facilities.container.truss.cable.sensor.chart"},{"name":"facilities.historics.store"},{"name":"administration"},{"name":"administration.users"},{"name":"administration.users.index"},{"name":"administration.users.create"},{"name":"administration.users.edit"},{"name":"administration.users.update"},{"name":"administration.users.delete"},{"name":"administration.facilities"},{"name":"administration.facilities.index"},{"name":"administration.facilities.create"},{"name":"administration.facilities.edit"},{"name":"administration.facilities.update"},{"name":"administration.facilities.delete"}]}]}},"example":""}},"description":"Successful Operation."},"400":{"description":"Bad Request.","x-last-modified":1638880646964}},"operationId":"get-api-administration-users","summary":"Get all users.","description":"Get an array with all the users."},"x-last-modified":1639059330655},"/api/administration/users/{user}":{"summary":"Manage a particular user.","description":"Get information, update, or delete a particular user provided in the path.","get":{"requestBody":{"required":false},"tags":["Administrative Operations"],"responses":{"200":{"description":"Successful Operation.","x-last-modified":1638881039266},"400":{"description":"Bad Request.","x-last-modified":1638881052925}},"operationId":"get-user-admin","summary":"Get information about a user."},"put":{"requestBody":{"required":false},"tags":["Administrative Operations"],"operationId":"update-user-admin","summary":"Update information of a user."},"delete":{"requestBody":{"required":false},"tags":["Administrative Operations"],"responses":{"200":{"description":"Successful Operation.","x-last-modified":1638881039266}},"operationId":"delete-user-admin","summary":"Delete a user."},"parameters":[{"deprecated":false,"name":"user","description":"ID of the user.","in":"path","required":true,"x-last-modified":1638881304368}],"x-last-modified":1639059335951},"/api/administration/{proyecto}/representation":{"summary":"Representation of a facility.","description":"Add or delete the representation of a facility.","post":{"tags":["Administrative Operations"],"operationId":"post-representation","summary":"Store the representation of a facility."},"delete":{"tags":["Administrative Operations"],"operationId":"delete-representation","summary":"Delete the representation of a facility."},"x-last-modified":1639059342444},"/api/facilities":{"summary":"Get facilities.","description":"Get all the facilities for the user.","get":{"tags":["Facility Operations"],"responses":{"200":{"content":{"application/json":{"schema":{"description":"","minItems":1,"uniqueItems":true,"type":"array","items":{"$ref":"#/components/schemas/Facility"},"externalDocs":{"description":"","url":""},"example":"","x-examples":{"example-1":[{"id":6,"nombre":"GV3679","descripcion":"Cargill APS","version":"3.5.10","seeded":"2021-10-25 11:58:30","history_days":"365","created_at":"2021-10-25 11:55:25","updated_at":"2021-11-03 10:23:00"}]}},"example":""}},"description":"Successful operation."},"400":{"description":"Bad Request","x-last-modified":1638880431161}},"operationId":"getFacilities","summary":"Get facilities.","description":"Get a list with all the facilities, each one containing information including their name, description, and version."},"x-last-modified":1639059376357},"/api/administration/facilities/{facility}":{"summary":"Get a particular facility.","description":"Get all information about a facility, providing its ID as a parameter.","get":{"tags":["Administrative Operations"],"responses":{"200":{"description":"An object that contains all the information of the facility.An object that contains all the information of the facility.","x-last-modified":1639144230561}},"operationId":"get-facility","summary":"Get a particular facility.","description":"View the data of a particular facility. In the UI it's displayed as editable information. You need admin permissions to access it."},"put":{"tags":["Administrative Operations"],"responses":{"200":{"content":{"application/json":{"schema":{"description":"","type":"array","items":{"$ref":"#/components/schemas/Facility"},"externalDocs":{"description":"","url":""},"example":""},"example":""}},"description":"Successful operation."}},"operationId":"put-facility","summary":"Update a particular facility.","description":"Update information of a particular facility, you need to provide the information that isn't updated as well. In the UI it consists of a form with editable fields. You need admin permissions to update a facility."},"delete":{"tags":["Administrative Operations"],"operationId":"delete-facility","summary":"Delete a particular facility.","description":"Un-assign a user from viewing a particular facility. This can only be accessed with administrative roles."},"parameters":[{"$ref":"#/components/parameters/proyecto","name":"Facility","x-last-modified":1638359553017}],"x-last-modified":1639395042580},"/api/administration/facilities":{"summary":"Facilities in administration.","description":"All operations to manage facilities with the administrative roles.","get":{"tags":["Administrative Operations"],"responses":{"200":{"content":{"application/json":{"schema":{"description":"","type":"array","items":{"$ref":"#/components/schemas/Facility"},"externalDocs":{"description":"","url":""},"example":""},"example":""}},"description":"Successful operation."}},"operationId":"get-administration-facilities","summary":"Get facilities","description":"Get an array that displays all the existent facilities, with data that includes their name, description and version.  You need admin role permissions to access it."},"post":{"requestBody":{"required":true},"tags":["Administrative Operations"],"responses":{"200":{"description":"Succesful operation.","x-last-modified":1638185646080}},"operationId":"post-administration-facilities","summary":"Store facility.","description":"Store a new facility into the database.\nThe information of the new facility has to be provided from a form that requires data of a facility including a structure file."},"x-last-modified":1639395051424},"/api/login":{"summary":"Log in.","description":"Log user into the app with username and password.","post":{"requestBody":{"description":"Enter user credentials.","content":{"application/json":{"schema":{"description":"","required":["email","password"],"type":"object","properties":{"email":{"minLength":1,"type":"string"},"password":{"minLength":1,"type":"string"}},"x-examples":{"example-1":{"email":"admin@grainvision.com.ar","password":"secret"}}}}},"required":true},"tags":["Auth Operations"],"responses":{"200":{"content":{"application/json":{"schema":{"description":"","required":["token","token_type","expires_in"],"type":"object","properties":{"token":{"minLength":1,"type":"string"},"token_type":{"minLength":1,"type":"string"},"expires_in":{"type":"number"}},"x-examples":{"example-1":{"token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJodHRwOlwvXC9ncmFpbnZpc2lvbi5sb2NhbFwvYXBpXC9sb2dpbiIsImlhdCI6MTYzNzkyNzMxNSwiZXhwIjoxNjM4MDEzNzE1LCJuYmYiOjE2Mzc5MjczMTUsImp0aSI6IldiS0pwSFYyU1NIeDFEUGoiLCJzdWIiOjEsInBydiI6Ijg3ZTBhZjFlZjlmZDE1ODEyZmRlYzk3MTUzYTE0ZTBiMDQ3NTQ2YWEifQ.5_XcJNvblIHVvcsAj4ZzNr1UlbZO93UEYtikTCg5BCU","token_type":"bearer","expires_in":86400}}}}},"description":"Succesful operation."},"400":{"content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Already authenticated."}}}}},"description":"Already authenticated."},"422":{"content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"The given data was invalid"},"errors":{"type":"object","example":{"email":"These credentials do not match our records."}}}}}},"description":"Invalid credentials."}},"operationId":"postLogin","summary":"Log In.","description":"Log into the application using a valid username and password."},"x-last-modified":1639486871327},"/api/facilities/{proyecto}":{"summary":"Get a facility.","description":"Get information about a specific facility.","get":{"tags":["Facility Operations"],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Facility"}}},"description":"Successful operation."},"400":{"description":"Bad Request.","x-last-modified":1638880551092}},"operationId":"getFacility","summary":"Get facility.","description":"Get the name, description, creation date, and version of a particular facility."},"parameters":[{"$ref":"#/components/parameters/proyecto","name":"proyecto","x-last-modified":1638184958406}],"x-last-modified":1639487141843},"/api/facilities/{proyecto}/summary":{"summary":"Get summary.","description":"Get the summary of a facility.","get":{"tags":["Facility Operations"],"responses":{"200":{"content":{"application/json":{"schema":{"description":"","required":["sensors","summaries"],"type":"object","properties":{"sensors":{"type":"number"},"summaries":{"type":"array","items":{}}},"externalDocs":{"description":"","url":""},"example":"","x-examples":{"example-1":{"sensors":8104,"summaries":[]}}}}},"description":"Successful operation."}},"operationId":"getSummary","summary":"Get summary of a facility.","description":"Get a summary of a facility."},"parameters":[{"$ref":"#/components/parameters/proyecto","name":"proyecto","x-last-modified":1638184990619}],"x-last-modified":1639487155371},"/api/facilities/{proyecto}/containers":{"summary":"Get containers.","description":"Get an array with all the containers in a facility.","get":{"tags":["Facility Operations"],"responses":{"200":{"content":{"application/json":{"schema":{"description":"","type":"array","items":{"$ref":"#/components/schemas/Container"},"externalDocs":{"description":"","url":""},"example":""},"example":""}},"description":"Successful operation."}},"operationId":"getConteiners","summary":"Get containers.","description":"Get an array with all the containers included in a specific facility. With information like their id, type, and tag."},"parameters":[{"$ref":"#/components/parameters/proyecto","name":"proyecto","x-last-modified":1638184979121}],"x-last-modified":1639487164993},"/api/facilities/{proyecto}/representation":{"get":{"tags":["Facility Operations"],"responses":{"200":{"content":{"application/json":{"schema":{"description":"Object with all the components used to represent a facility, with its coordinates, sizes, angles, and other relevant information. Which is later processed and shown as a aerial view of the facility.","required":[],"type":"object","externalDocs":{"description":"","url":""},"example":""},"example":""}},"description":"Successful Operation.","x-last-modified":1638883817800}},"operationId":"get-representation","summary":"Get representation of a facility","description":"This request returns a JSON object with information used to represent graphically a particular facility. This includes coordinates, sizes, angles, etc. of the different components that conform a facility."},"x-last-modified":1639487174047},"/api/logout":{"summary":"Log out.","description":"Log out of the app.","post":{"tags":["Auth Operations"],"responses":{"200":{"description":"Successful operation."}},"operationId":"postLogout","summary":"Log Out.","description":"Log user out of the application."},"x-last-modified":1639487185782}},"components":{"schemas":{"Facility":{"description":"Facility object\n","required":["id","nombre","descripcion","version","seeded","history_days","created_at","updated_at"],"type":"object","properties":{"nombre":{"type":"string","example":["GV3679"]},"descripcion":{"type":"string","example":["Cargill APS"]},"seeded":{"type":"string","example":["2021-10-25 11:58:30"]},"version":{"type":"string","example":["3.5.10"]}},"example":{"nombre":"GV3679","descripcion":"Cargill APS","seeded":"2021-10-25 11:58:30","version":"3.5.10"},"x-examples":{"example-1":{"id":6,"nombre":"GV3679","descripcion":"Company SA","version":"3.5.10","seeded":"2021-10-25 11:58:30","history_days":"365","created_at":"2021-10-25 11:55:25","updated_at":"2021-11-03 10:23:00"}},"x-last-modified":1639489320217},"Cable":{"description":"Cable object","required":["id","contenedor_id","tag","sensores_count"],"type":"object","properties":{"id":{"type":"number","example":[211]},"contenedor_id":{"type":"number","example":[42]},"tag":{"type":"string","example":["G001K001C001"]},"sensores_count":{"type":"number","example":[3]}},"example":{"id":211,"contenedor_id":42,"tag":"G001K001C001","sensores_count":3},"x-last-modified":1639489247340},"Container":{"description":"Container object","required":[],"type":"object","properties":{"id":{"type":"number","example":[41]},"parent_id":{"type":"string","example":[]},"contenedor_tipo_id":{"type":"number","example":[2]},"tag":{"type":"string","example":["G001"]},"tipo":{"type":"object","properties":{"id":{"type":"number","example":[2]},"tipo":{"type":"string","example":["Celda"]},"letra":{"type":"string","example":["G"]}}}},"example":{"id":41,"contenedor_tipo_id":2,"tag":"G001","tipo":{"id":2,"tipo":"Celda","letra":"G"}},"x-last-modified":1639489330658},"User":{"description":"User object","required":[],"type":"object","properties":{"name":{"type":"string","example":["user"]},"email":{"type":"string","example":["user@email.com"]},"email_verified_at":{"type":"string","example":[]},"created_at":{"type":"string","example":["2021-10-04 09:24:59"]},"updated_at":{"type":"string","example":["2021-12-06 10:01:05"]},"photo_url":{"type":"string","example":["https://www.gravatar.com/avatar/549dd0ad5839708b235682769d181cc4.jpg?s=200&d=mm"]},"permissions":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","example":["dashboard"]}}}},"roles":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","example":["super-admin"]},"permissions":{"type":"array","items":{"type":"string","example":[]}}}}}},"example":{"name":"user","email":"user@email.com","created_at":"2021-10-04 09:24:59","updated_at":"2021-12-06 10:01:05","photo_url":"https://www.gravatar.com/avatar/549dd0ad5839708b235682769d181cc4.jpg?s=200&d=mm","permissions":[{"name":"dashboard"},{"name":"facilities"},{"name":"facilities.status"},{"name":"facilities.overview"},{"name":"facilities.view"},{"name":"facilities.container.status"},{"name":"facilities.container.truss.status"},{"name":"facilities.container.cable.chart"},{"name":"facilities.container.cable.truss.chart"},{"name":"facilities.container.cable.sensor.chart"},{"name":"facilities.container.truss.cable.sensor.chart"},{"name":"facilities.historics.store"},{"name":"administration"},{"name":"administration.users"},{"name":"administration.users.index"},{"name":"administration.users.create"},{"name":"administration.users.edit"},{"name":"administration.users.update"},{"name":"administration.users.delete"},{"name":"administration.facilities"},{"name":"administration.facilities.index"},{"name":"administration.facilities.create"},{"name":"administration.facilities.edit"},{"name":"administration.facilities.update"},{"name":"administration.facilities.delete"}],"roles":[{"name":"super-admin","permissions":[]}]},"x-last-modified":1639490028530}},"parameters":{"proyecto":{"deprecated":false,"name":"proyecto","description":"Name of the desired facility.","schema":{"format":"text","description":"Name of the facility.","type":"string"},"in":"path","required":true,"x-last-modified":1638184902784},"tag":{"deprecated":false,"name":"tag","description":"Path of a specific container in a specific facility.","in":"path","required":true,"x-last-modified":1639488925114}},"securitySchemes":{"JWTAuth":{"scheme":"bearer","bearerFormat":"JWT","type":"http","description":"Example: \n> Authorization: Bearer <token>","x-last-modified":1639393999621}},"headers":{},"responses":{}},"security":[{"oAuth 2":[]},{"oAuth":[]},{"Bearer token":[]}],"tags":[{"name":"Auth Operations","description":"All the operations that manage the authentication of a user.","x-last-modified":1638887202007},{"name":"Facility Operations","description":"All the operations that are related to facilities for non-administrative roles.","x-last-modified":1638887212025},{"name":"Settings and Profile Operations","description":"All the operations that provide and update information about a user.","x-last-modified":1638887222655},{"name":"Administrative Operations","description":"Administration","externalDocs":{},"x-last-modified":1638887231396}]}